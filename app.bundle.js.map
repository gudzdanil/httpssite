{"version":3,"sources":["webpack:///./index.js","webpack:///./run.js","webpack:///./services/pub-nub.service.js","webpack:///./services/geo.service.js","webpack:///./components/app/app.component.js","webpack:///./components/app/app.controller.js","webpack:///./components/app/app.scss?f67c","webpack:///./components/app/app.scss","webpack:///../~/css-loader/lib/css-base.js","webpack:///../~/style-loader/addStyles.js","webpack:///./components/app/app.html","webpack:///./components/message/message.component.js","webpack:///./components/message/message.scss?37eb","webpack:///./components/message/message.scss","webpack:///./components/message/message.html","webpack:///./components/send-form/send-form.component.js","webpack:///./components/send-form/send-form.controller.js","webpack:///./components/send-form/send-form.scss?78f3","webpack:///./components/send-form/send-form.scss","webpack:///./components/send-form/form.html","webpack:///./components/map/map.component.js","webpack:///./components/map/map.controller.js","webpack:///./components/map/map.scss?04fb","webpack:///./components/map/map.scss","webpack:///./components/map/map.html","webpack:///./main.scss?cf26","webpack:///./main.scss"],"names":["require","module","run","service","component","PubNubService","init","$rootScope","$q","GeoService","$http","$window","_rootScope","_http","_q","_GeoService","_channel","username","stored","localStorage","getItem","_usernamePromise","resolve","get","then","res","data","name","surname","setItem","_geoPromise","getLatLng","all","responses","_pubnub","PubNub","subscribeKey","publishKey","uuid","addListener","_getListener","subscribe","channels","withPresence","setState","state","status","response","console","log","arguments","rej","history","channel","statusCode","messages","hereNow","includeUUIDs","includeState","message","publish","assign","user","_listener","angular","bind","m","$broadcast","presence","p","s","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","template","controller","$scope","_PubNub","_scope","users","getHistory","map","el","entry","reverse","getOnlineUsers","i","hasOwnProperty","push","occupants","$on","e","$apply","unshift","action","length","filter","u","AppController","bindings","text","SendFormController","userCoords","lastUserId","$element","_$element","_markers","last","changesObj","clearMarkers","currentValue","initMarkers","resetMarkerIcons","marker","setIcon","getIcon","url","getDefaultIcon","scaledSize","google","maps","Size","size","origin","Point","anchor","_map","Map","children","center","zoom","setMap","Marker","cloneDeep","icon","MapController"],"mappings":"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4B,EAAE5B;wBAAM+D,QAAS;yBACtDhB,MAAMc,QAAQ,EAAC7D,MAAM4B,EAAE5B,MAAMO,OAAOqB,EAAErB;;;;;QA8BnD;SACC,KAAK;SACL,OAAO,SAAS,iBA1BH;aACb,OAAO,KAAKwC;;QA4Bb;SACC,KAAK;SACL,OAAO,SAAS,gBA3BJ;aACZ,OAAO,KAAK9B,SAAS8C,SAAS,KAAK9C,SAAS,GAAGO,OAAO;;;;KA+B1D,OAAO;;;AAGX,SAAQ,UA9BO0C,c;;;;;;ACjEf;;AAEA;AACA;AACA;AACA;AACA,iDAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,gCAA+B,uBAAuB,WAAW,YAAY,aAAa,cAAc,mBAAmB,EAAE,mBAAmB,gBAAgB,gBAAgB,qBAAqB,EAAE;;AAEvM;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;ACrPA,gR;;;;;;ACAA;;AAEA,QAAO,eAAe,SAAS,cAAc;KACzC,OAAO;;AAHX,oBAAAxG,CAAQ;;AAOR,SAAQ,UALO;KACXyG,UAAU;SACN9C,SAAS;;KAEbqB,UAAU,mBAAAhF,CAAQ;;;;;;;ACNtB;;AAEA;AACA;AACA;AACA;AAC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","file":"app.bundle.js","sourcesContent":["require('./main.scss');\n\nimport angular from 'angular';\n\nimport run from './run';\nimport PubNubService from './services/pub-nub.service';\nimport GeoService from './services/geo.service';\n\nimport appComponent from './components/app/app.component';\nimport messageComponent from './components/message/message.component';\nimport sendFormComponent from './components/send-form/send-form.component';\nimport mapComponent from './components/map/map.component';\n\nangular.module('es360', [])\n    .run(run)\n    .service('PubNubService', PubNubService)\n    .service('GeoService', GeoService)\n    .component('app', appComponent)\n    .component('message', messageComponent)\n    .component('sendForm', sendFormComponent)\n    .component('map', mapComponent);\n\n\n// WEBPACK FOOTER //\n// ./index.js","function run(PubNubService) {\n    \"ngInject\";\n\n    PubNubService.init();\n}\n\nexport default run;\n\n\n// WEBPACK FOOTER //\n// ./run.js","import _ from 'lodash';\n\nclass PubNubService {\n    constructor($rootScope, $q, GeoService, $http, $window) {\n        \"ngInject\";\n\n        this._rootScope = $rootScope;\n        this._http = $http;\n        this._q = $q;\n        this._GeoService = GeoService;\n        this._channel = 'chatroom7';\n        this.username = '';\n\n        let stored = $window.localStorage.getItem('username');\n        this._usernamePromise = stored ? $q.resolve(this.username = stored) : this._http.get('https://uinames.com/api/').then((res) => {\n            this.username = res.data.name + ' ' + res.data.surname;\n            $window.localStorage.setItem('username', this.username);\n            return this.username;\n        }, () => {\n            this.username = 'Anonymous';\n            return $q.resolve(this.username);\n        });\n\n        this._geoPromise = this._GeoService.getLatLng();\n    }\n\n    init() {\n        this._q.all([this._usernamePromise, this._geoPromise]).then((responses) => {\n            this._pubnub = new PubNub({\n                subscribeKey: \"sub-c-e622b4f8-d7d4-11e6-baae-0619f8945a4f\",\n                publishKey: \"pub-c-f9081d4e-f107-4d19-85f7-b453dbc9b13e\",\n                uuid: responses[0]\n            });\n            this._pubnub.addListener(this._getListener());\n            this._pubnub.subscribe({\n                channels: [this._channel],\n                withPresence: true\n            });\n            this._pubnub.setState({\n                channels: [this._channel],\n                state: responses[1]\n            }, function (status, response) {\n                console.log('set status res', arguments);\n            });\n        });\n    }\n\n    getHistory() {\n        return this._q.all([this._usernamePromise, this._geoPromise]).then(responses => {\n            return this._q((res, rej) => {\n                this._pubnub.history(\n                    {\n                        channel: this._channel\n                    },\n                    function (status, response) {\n                        console.log('history', status, response);\n                        if (status.statusCode !== 200) {\n                            rej(status);\n                        }\n                        res(response.messages);\n                    }\n                );\n            });\n        });\n    }\n\n    getOnlineUsers() {\n        return this._q.all([this._usernamePromise, this._geoPromise]).then(responses => {\n            return this._q((res) => {\n                this._pubnub.hereNow(\n                    {\n                        includeUUIDs: true,\n                        includeState: true,\n                        channels: [this._channel]\n                    },\n                    function (status, response) {\n                        console.log('here now', status, response);\n                        res(response);\n                    }\n                );\n            });\n        });\n    }\n\n    publish(message) {\n        this._pubnub.publish(\n            {\n                message: _.assign({user: this.username}, message),\n                channel: this._channel\n            },\n            function (status, response) {\n                // handle status, response\n                console.log('publish response', arguments);\n            }\n        );\n    }\n\n    _getListener() {\n        return this._listener || (this._listener = {\n                message: angular.bind(this, function (m) {\n                    console.log('message', m);\n                    this._rootScope.$broadcast('message', m.message);\n                }),\n                presence: angular.bind(this, function (p) {\n                    console.log('user', p);\n                    this._rootScope.$broadcast('user', p);\n                }),\n                status: angular.bind(this, function (s) {\n                    console.log('status', s);\n                    this._rootScope.$broadcast('status', s);\n                })\n            });\n    }\n}\n\nexport default PubNubService;\n\n\n// WEBPACK FOOTER //\n// ./services/pub-nub.service.js","class GeoService {\n    constructor($q) {\n        \"ngInject\";\n        this._q = $q;\n    }\n\n    getLatLng() {\n        return this._q((res, rej) => {\n            if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(function (position) {\n                    res({\n                        lat: position.coords.latitude,\n                        lng: position.coords.longitude\n                    });\n                }, function () {\n                    rej();\n                });\n            } else {\n                rej(true);\n            }\n        });\n    }\n}\n\nexport default GeoService;\n\n\n// WEBPACK FOOTER //\n// ./services/geo.service.js","require('./app.scss');\n\nimport controller from './app.controller';\n\nexport default {\n    template: require('./app.html'),\n    controller: controller\n};\n\n\n// WEBPACK FOOTER //\n// ./components/app/app.component.js","class AppController {\n    constructor(PubNubService, $scope) {\n        \"ngInject\";\n        this._PubNub = PubNubService;\n        this._scope = $scope;\n\n        this.messages = [];\n        this.users = [];\n    }\n\n    $onInit() {\n        this._PubNub.getHistory().then(messages => {\n            this.messages = messages.map(function (el) {\n                return el.entry;\n            }).reverse();\n\n            this._PubNub.getOnlineUsers().then(response => {\n                this.users = [];\n                for(let i in response.channels) {\n                    if(response.channels.hasOwnProperty(i)) {\n                        this.users.push(...response.channels[i].occupants);\n                    }\n                }\n            });\n        });\n        this._scope.$on('message', (e, m) => {\n            this._scope.$apply(() => {\n                this.messages.unshift(m);\n            });\n        });\n        this._scope.$on('user', (e, m) => {\n            if(m.action === 'state-change') {\n                if(!this.users.length) {\n                    return;\n                }\n                this._scope.$apply(() => {\n                    let user  = this.users.filter((u) => u.uuid === m.uuid)[0];\n                    if(user) {user.state = m.state;}\n                    else {\n                        this.users.push({\n                            uuid: m.uuid,\n                            state: m.state\n                        });\n                    }\n                    this.users = [...this.users];\n                });\n            }\n            else if(m.action === 'join') {\n                let users = [...this.users];\n                if(!(this.users.filter((u) => u.uuid === m.uuid).length)) {\n                    users.unshift({uuid: m.uuid, state: m.state});\n                }\n            }\n        });\n    }\n\n    getUsersCoords() {\n        return this.users;\n    }\n\n    getLastUserId() {\n        return this.messages.length ? this.messages[0].user : null;\n    }\n}\n\nexport default AppController;\n\n\n// WEBPACK FOOTER //\n// ./components/app/app.controller.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./app.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./app.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./app.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/app/app.scss\n// module id = 10\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"app {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  display: block; }\\n\\n#message-list {\\n  height: 63%;\\n  width: 100%;\\n  overflow-y: auto; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/sass-loader!./components/app/app.scss\n// module id = 11\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader/lib/css-base.js\n// module id = 12\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/style-loader/addStyles.js\n// module id = 13\n// module chunks = 0","module.exports = \"<send-form></send-form>\\n<div id=\\\"message-list\\\">\\n    <message ng-repeat=\\\"message in $ctrl.messages track by $index\\\" message=\\\"message\\\"></message>\\n</div>\\n<map user-coords=\\\"$ctrl.getUsersCoords()\\\" last-user-id=\\\"$ctrl.getLastUserId()\\\"></map>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/app/app.html\n// module id = 14\n// module chunks = 0","require('./message.scss');\n\nexport default {\n    bindings: {\n        message: '<'\n    },\n    template: require('./message.html')\n};\n\n\n// WEBPACK FOOTER //\n// ./components/message/message.component.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./message.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./message.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./message.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/message/message.scss\n// module id = 16\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"message {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  background: #ebf4ff;\\n  padding: 10px;\\n  border-top: 1px solid rgba(0, 0, 0, 0.4); }\\n  message .message-username {\\n    width: 150px;\\n    border-right: 1px solid rgba(17, 85, 111, 0.3);\\n    margin-right: 10px; }\\n  message p {\\n    margin-bottom: 0; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/sass-loader!./components/message/message.scss\n// module id = 17\n// module chunks = 0","module.exports = \"<div class=\\\"message-username\\\" ng-bind=\\\"$ctrl.message.user || 'Anonymous'\\\"></div><p ng-bind=\\\"$ctrl.message.text\\\"></p>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/message/message.html\n// module id = 18\n// module chunks = 0","require('./send-form.scss');\n\nimport controller from './send-form.controller';\n\nexport default {\n    template: require('./form.html'),\n    controller: controller\n}\n\n\n// WEBPACK FOOTER //\n// ./components/send-form/send-form.component.js","class SendFormController {\n    constructor(PubNubService) {\n        \"ngInject\";\n\n        this._PubNub = PubNubService;\n        this.text = '';\n    }\n\n    submit() {\n        this._PubNub.publish({text: this.text});\n        this.text = '';\n    }\n}\n\nexport default SendFormController;\n\n\n// WEBPACK FOOTER //\n// ./components/send-form/send-form.controller.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./send-form.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./send-form.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./send-form.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/send-form/send-form.scss\n// module id = 21\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"send-form {\\n  height: 12%;\\n  width: 100%;\\n  display: block; }\\n\\ntextarea.form-control, button.btn {\\n  height: 12vh; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/sass-loader!./components/send-form/send-form.scss\n// module id = 22\n// module chunks = 0","module.exports = \"<form ng-submit=\\\"$ctrl.submit($ctrl.text)\\\" class=\\\"row\\\">\\n    <div class=\\\"col-xs-8\\\">\\n        <textarea ng-model=\\\"$ctrl.text\\\" style=\\\"resize: none\\\" placeholder=\\\"Input your message here\\\"\\n                  class=\\\"form-control\\\"></textarea>\\n    </div>\\n    <div class=\\\"col-xs-4\\\">\\n        <button class=\\\"btn btn-default btn-block\\\" type=\\\"submit\\\">Send</button>\\n    </div>\\n</form>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/send-form/form.html\n// module id = 23\n// module chunks = 0","require('./map.scss');\nimport controller from './map.controller';\n\nexport default {\n    bindings: {\n        userCoords: '<',\n        lastUserId: '<'\n    },\n    template: require('./map.html'),\n    controller: controller\n};\n\n\n// WEBPACK FOOTER //\n// ./components/map/map.component.js","import _ from 'lodash';\n\nclass MapController {\n    constructor($element, GeoService, $scope) {\n        \"ngInject\";\n\n        this._GeoService = GeoService;\n        this._$element = $element;\n        this._markers = [];\n        this._scope = $scope;\n        this.last = null;\n    }\n\n    $onChanges(changesObj) {\n        if (changesObj.userCoords) {\n            this.clearMarkers();\n            if (changesObj.userCoords.currentValue && changesObj.userCoords.currentValue.length) {\n                this.initMarkers();\n            }\n        }\n        if (changesObj.lastUserId) {\n            this.resetMarkerIcons();\n            if (changesObj.lastUserId.currentValue) {\n                this._markers.filter(m => {\n                    if (m.uuid === this.lastUserId) {\n                        m.marker.setIcon(this.getIcon().url);\n                    }\n                });\n            }\n        }\n    }\n\n    resetMarkerIcons() {\n        for (let i = 0; i < this._markers.length; i++) {\n            this._markers[i].marker.setIcon(this.getDefaultIcon().url);\n        }\n    }\n\n    getDefaultIcon() {\n        return {\n            scaledSize: new google.maps.Size(20, 25),\n            size: new google.maps.Size(20, 25),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(10, 25),\n            url: 'https://www.fuzu.com/assets/fa-map-marker-black-076c91ebe04439cf1dea1e3d41cdcf8a9e74d5dcc5682578cd6966ee977a0e75.png'\n        };\n    }\n\n    getIcon() {\n        return {\n            scaledSize: new google.maps.Size(30, 25),\n            size: new google.maps.Size(30, 25),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(15, 25),\n            url: 'http://promujer.org/content/themes/storyware/resources/assets/build/svg/map-marker.svg'\n        };\n    }\n\n    $onInit() {\n        this._map = new google.maps.Map(this._$element[0].children[0], {\n            center: {lat: 0, lng: 0},\n            zoom: 1\n        });\n        // setTimeout(() => {\n        //     let marker = new google.maps.Marker({\n        //         position: {lat: 0, lng: 0},//_.cloneDeep(this.userCoords[i].state),\n        //         map: this._map\n        //     });\n        // }, 2000);\n\n    }\n\n    clearMarkers() {\n        for (let i = 0; i < this._markers; i++) {\n            this._markers.marker.setMap(null);\n        }\n        this._markers = [];\n    }\n\n    initMarkers() {\n        for (let i = 0; i < this.userCoords.length; i++) {\n            let marker = new google.maps.Marker({\n                position: _.cloneDeep(this.userCoords[i].state),\n                map: this._map,\n                icon: this.userCoords[i].uuid === this.lastUserId ? this.getIcon() : this.getDefaultIcon()\n            });\n            this._markers.push({\n                marker: marker,\n                uuid: this.userCoords[i].uuid\n            });\n        }\n    }\n}\n\nexport default MapController;\n\n\n// WEBPACK FOOTER //\n// ./components/map/map.controller.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./map.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./map.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/postcss-loader/index.js!./../../../node_modules/sass-loader/index.js!./map.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/map/map.scss\n// module id = 26\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"map {\\n  position: absolute;\\n  bottom: 0;\\n  height: 25%;\\n  width: 100%;\\n  display: block; }\\n\\nmap > div {\\n  height: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/sass-loader!./components/map/map.scss\n// module id = 27\n// module chunks = 0","module.exports = \"<div></div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/map/map.html\n// module id = 28\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/postcss-loader/index.js!./../node_modules/sass-loader/index.js!./main.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/postcss-loader/index.js!./../node_modules/sass-loader/index.js!./main.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/postcss-loader/index.js!./../node_modules/sass-loader/index.js!./main.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.scss\n// module id = 29\n// module chunks = 0","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"html, body {\\n  height: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/sass-loader!./main.scss\n// module id = 30\n// module chunks = 0"],"sourceRoot":""}